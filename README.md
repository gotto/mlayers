# magic layers

## これは何？

HTMLをレイヤー化して表示するPHPスクリプトです。

HTMLの制作をコンテンツをメンテナンスするレイヤーと、デザインなどを共通化する複数の階層のテンプレートレイヤーに分けてることができます。レイヤーの合成はサーバーで動的に行われますので、手作業で合成する必要はありません。

コンテンツの制作とデザインの制作を別ファイルで行いますので、複数の人が手分けして作業しても先祖返りが起きる可能性をかなり低くできます。また、コンテンツレイヤーをプログラムで生成することもできるので、静的なページに動的なコンテンツを追加で入れることも簡単です。

静的なページ中心なのにコンテンツとデザインの分離のためにでわざわざCMSを使うケースでは、CMSの代わりに使うと作業をかなり簡素化できます。

通常はいらない機能が入っていたり、コードがきれいじゃなかったり、ドキュメントがなかったりしますので、ドキュメントとコードの手直しをしていきます。

## どうやって使うの？

index.html
```html
<?php $layer[] = __FILE__; require_once "index_template.php" ?>
<!DOCTYPE HTML>
<html lang="ja">
<head>
<meta charset="utf-8">
</head>
<body>
<div magic-data="文章">この文章が下位レイヤーに流し込まれます。</div>
</body>
</html>
```

index_template.php
```html
<?php $layer[] = __FILE__; require_once 'mlayers.php' ?>
<!DOCTYPE HTML>
<html lang="ja">
<head>
<meta charset="utf-8">
</head>
<body>
<div>
  <div magic="文章"></div>
</div>
</body>
</html>
```

# 簡単な解説
- レイヤーは多段にできます。
- 一番上のレイヤーをコンテンツレイヤーと呼びます。
- コンテンツレイヤー以外をテンプレートレイヤーと呼びます。
- 上位レイヤーのノードのアトリビュートを下位レイヤーに流し込むこともできます。
- インクルードの機能もあります。
- CSVファイルをインクルードしてテーブルに整形する機能もあります。
- プログラムでレイヤーの値を生成して下位レイヤーに流し込むこともできます。
